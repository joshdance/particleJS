/*
 *	ParticleJS version 0.1.4 ALPHA
 *	MIT license - include header
 *
 *	By Epistemex (c) 2014
 *	www.epistemex.com
*/
"use strict";var ParticleJS={Physics2D:{Turbulence:{Tools:{}}},Shader2D:{},Emitter2D:{},Emitter3D:{}};Array.prototype.forEach=function(b,a){var g=Object(this),e=g.length>>>0,f=(a===void 0||a===null);for(var d=0;d<e;d++){if(d in g){if(f){b(g[d],d,g)}else{b.call(a,g[d],d,g)}}}};ParticleJS.Scene=function(j){j=j||{};var g=this,k=j.width||512,d=j.height||256,h=j.mode?j.mode:"",i=h==="3D",c=!!j.frameBound,b=j.FPS||60,f=[],a=[],e=performance.now();this.emitters=[];this.addCamera=function(l){if(!i){throw"Need to be in 3D mode to add a camera."}};this.addLight=function(l){if(!i){throw"Need to be in 3D mode to add a light."}};this.addEmitter=function(l){l.init(k,d);this.emitters.push(l);return this};this.preRoll=function(m){var p=performance.now();for(var o=0;o<m;o++){for(var n=0,l;l=this.emitters[n++];){}}return this};this.render=function(){var p=performance.now(),l=p-e,q=c?60/b:l/16.6667;e=p;for(var n=0,m;m=this.emitters[n++];){var o=((m.birthRate()*q)/l+0.5)|0;m.generateParticles(p,o);m.renderParticles(p,q,l);m.cleanupParticles(p)}return this}};ParticleJS.Emitter2D.Point=function(r){r=r||{};var p=this,K,n,f=0.0174532925199433,u=0,a=typeof r.birthRate==="number"?r.birthRate:100,J=(typeof r.velocity==="number"?r.velocity:100)*0.01,q=typeof r.opacity==="number"?r.opacity:1,E=typeof r.size==="number"?r.size:1,o=(typeof r.life==="number"?r.life:3)*1000,g=(typeof r.feather==="number"?r.feather:40)*0.01,D=(typeof r.randomVelocity==="number"?r.randomVelocity:0)*0.01,B=(typeof r.randomOpacity==="number"?r.randomOpacity:0)*0.01,C=(typeof r.randomSize==="number"?r.randomSize:0)*0.01,A=(typeof r.randomFeather==="number"?r.randomFeather:0)*0.01,F=typeof r.spread==="number"?r.spread:360,G=typeof r.spreadAngle==="number"?r.spreadAngle:0,I=F*f,H=G*f,y=typeof r.r==="number"?r.r:255,m=typeof r.g==="number"?r.g:255,b=typeof r.b==="number"?r.b:255,l=r.gradient?r.gradient:null,z,x=r.preRender,v=r.postRender,e=0,s=[],t=[],d=0,c=1000;if(l){if(Array.isArray(l)){l={cache:l}}else{l.generate()}}this.init=function(w,h){K=w;n=h;if(r.renderer){p.setShader(r.renderer)}};this.generateParticles=function(V,O){var S=[],h=0,W=0,X=0,Y=0,U=0,P=0,L=0,w=p,Q=j(0),M=i(0),T=k(0);while(O--){h=I*Math.random()+H;W=N(J,D);U=N(E,C);P=N(q,B);L=N(g,A);X=W*Math.cos(h);Y=W*Math.sin(h);var R=new ParticleJS.Particle2D();R.id=++u;R.x=w.x;R.y=w.y;R.vx=X;R.vy=Y;R.angle=h;R.sizeO=U;R.size=R.sizeO*T;R.sizeR=R.sizeO*0.5;R.life=o;R.born=V;R.r=y;R.g=m;R.b=b;R.opacityO=P;R.opacity=P*Q;R.featherO=g;R.feather=g*M;S.push(R)}s.push(S);function N(aa,Z){return aa-(Z*aa*Math.random())}};this.renderParticles=function(L,M,h){e=0;if(x){z.preRender()}w(s,t);if(v){z.postRender()}function w(Q,R){var N=-1,O=Q.length,P,S;while(++N<O){P=Q[N];S=!1;P.forEach(function(T){T.updateLife(L);if(T.isActive){S=!0;e++;var U=T.lifeIndex;T.opacity=T.opacityO*j(U);T.feather=T.featherO*i(U);T.size=T.sizeO*k(U);T.sizeR=T.size*0.5;R.forEach(function(V){V.apply(T)});T.x+=T.vx*M;T.y+=T.vy*M;z.renderParticle(T)}});if(!S){Q[N]=[]}}}};this.cleanupParticles=function(L){if(L-c>d){d=L;var M=[];for(var h=0,w;w=s[h++];){if(w.length){M.push(w)}}s=M;M=null}};function k(M){var h=p.sizeOverLife,L=h.length-1,w=(L*M)|0;return h[w]||0}function j(M){var h=p.opacityOverLife,L=h.length-1,w=(L*M)|0;return h[w]||1}function i(M){var h=p.featherOverLife,L=h.length-1,w=(L*M)|0;return h[w]||1}this.x=r.x;this.y=r.y;this.sizeOverLife=new Float32Array([1]);this.opacityOverLife=new Float32Array([1]);this.featherOverLife=new Float32Array([1]);this.addPhysics=function(w,h){if(w.apply){t.push(w);w.init({width:K,height:n,callback:h})}return this};this.setShader=function(h){z=h;if(z){z.init(K,n);z.setup(K,n,{size:100,feather:g,opacity:q,r:y,g:m,b:b,gradient:l})}return this};this.birthRate=function(h){if(!arguments.length){return a}if(h<0){h=0}a=h;return this};this.feather=function(h){if(!arguments.length){return g*100}if(h<0){h=0}g=h*0.01;return this};this.opacity=function(h){if(!arguments.length){return q}if(h<0){h=0}q=h;return this};this.life=function(h){if(!arguments.length){return o*0.001}o=h*1000;return this};this.velocity=function(h){if(!arguments.length){return J*100}J=h*0.01;return this};this.size=function(h){if(!arguments.length){return E}if(h<1){h=1}E=h;return this};this.spread=function(h){if(!arguments.length){return h}F=h;I=h*f;return this};this.spreadAngle=function(h){if(!arguments.length){return G}G=h;H=h*f;return this};this.translate=function(h,w,L){var M=0,O;for(;O=s[M++];){for(var P=0,N;N=O[P++];){if(N.isActive){N.x+=h;N.y+=w}}}return this};this.rotate;this.scale};ParticleJS.Particle2D=function(){this.id=0;this.x=0;this.y=0;this.vx=0;this.vy=0;this.velocity=0;this.spreadAngle=0;this.r=255;this.g=255;this.b=255;this.size=0;this.sizeR=0;this.sizeO=0;this.opacity=1;this.opacityO=1;this.feather=0;this.featherO=0;this.born=0;this.life=0;this.lifeIndex=0;this.isActive=!0};ParticleJS.Particle2D.prototype.updateLife=function(c){if(this.isActive){var b=c-this.born,a=this.life-b;this.lifeIndex=Math.max(0,Math.min(b/this.life,1));this.isActive=(a>0)}};ParticleJS.Physics2D.Gravity=function(a,b){a=a||0;b=b||0;var d,c;this.init=function(f){d=f.width;c=f.height;if(f.callback){f.callback(!0)}};this.apply=function(e){e.vx+=a;e.vy+=b};this.windX=function(e){a=e;return this};this.windY=function(e){b=e;return this}};ParticleJS.Physics2D.WindSimple=function(d,e,a){d=d||0;e=e||0;a=a||0;var c,b;this.init=function(f){c=f.width;b=f.height;if(f.callback){f.callback(!0)}};this.apply=function(f){f.x+=d;f.y+=e};this.windX=function(f){d=f;return this};this.windY=function(f){e=f;return this}};ParticleJS.Physics2D.Turbulence.Tools.getMapImage=function(u,p,e,g,j,d,t,n,k){var c=document.createElement("canvas"),l=c.getContext("2d"),v,z=0;c.width=u;c.height=p;l.fillStyle="#000";l.fillRect(0,0,u,p);l.strokeStyle=k;l.beginPath();for(;z<g;z++){for(v=0;v<e;v++){var q=o(v,z),b=t[q],m=n[q],s=j*0.5;rf=s*m;l.setTransform(1,0,0,1,v*j+s,z*d+d*0.5);l.rotate(b);l.moveTo(-rf,0);l.lineTo(rf,0);l.rect(rf,-1,2,2)}}l.stroke();return c;function o(a,f){return gi=f*g+a}};ParticleJS.Physics2D.Turbulence.Noise=function(d,e,l){d=d||32;e=e||32;l=(typeof l==="number")?l:0.05;var q=!1,t,p,f,c,i=1,s=new Float32Array(d*e*i),j=new Float32Array(d*e*i),a=2,k=4,r=0.5,g=0.1,m=0.8;this.init=function(h){t=h.width;p=h.height;f=t/d;c=p/e;q=!0;b();if(h.callback){h.callback(!0)}};this.apply=function(w){if(l){var v=n(w.x,w.y),h=v.a,u=v.force;w.vx+=l*Math.cos(h)*u;w.vy+=l*Math.sin(h)*u}};function n(w,z){var u=(w/f)|0,v=(z/c)|0,h=v*e+u;return{a:s[h],f:j[h]}}function o(h,u){return u*e+h}function b(){if(!q){return}var C,D,z=Math.PI*2,A=z*Math.random()-Math.PI,u=d*i,v=e*i,B;B=new ParticleJS.Physics2D.Turbulence.Noise.SimplexNoise();for(D=0;D<v;D++){for(C=0;C<u;C++){s[o(C,D)]=B.noise3D((C/u)*a,(D/v)*a,0)*z+A+z*g*Math.random()}}B=new ParticleJS.Physics2D.Turbulence.Noise.SimplexNoise();for(D=0;D<v;D++){for(C=0;C<u;C++){var w=B.noise3D(C/u*k,D/v*k,0);j[o(C,D)]=h(1-(w*m))}}function h(x){return Math.max(0,Math.min(1,x))}}this.force=function(h){l=h;return this};this.generate=function(){b()};this.getMapImage=function(){return ParticleJS.Physics2D.Turbulence.Tools.getMapImage(t,p,d,e,f,c,s,j,"rgba(90, 90, 255, 0.5)")}};ParticleJS.Physics2D.Turbulence.Noise.SimplexNoise=function(){this.perm=new Uint8Array(512);this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];for(var a=0;a<256;a++){this.perm[a]=this.perm[a+256]=Math.random()*256}};ParticleJS.Physics2D.Turbulence.Noise.SimplexNoise.prototype.noise3D=function(M,R,W){var x,y,z,A,C=(M+R+W)*0.33333333333,g=(M+C)|0,n=(R+C)|0,r=(W+C)|0,D=(g+n+r)*0.16666666667,I=M-(g-D),N=R-(n-D),S=W-(r-D),m,q,w,b,c,d,e,J,O,T,K,P,U,L,Q,V,E,F,G,H,h,o,u,l,p,v,f=this.grad3,B=this.perm;if(I>=N){if(N>=S){h=l=p=1;o=u=v=0}else{if(I>=S){h=l=v=1;o=u=p=0}else{h=o=p=0;u=l=v=1}}}else{if(N<S){h=l=o=0;u=p=v=1}else{if(I<S){h=u=l=0;o=p=v=1}else{h=u=v=0;o=l=p=1}}}J=I-h+0.16666666667;O=N-o+0.16666666667;T=S-u+0.16666666667;K=I-l+0.33333333333;P=N-p+0.33333333333;U=S-v+0.33333333333;L=I-0.5;Q=N-0.5;V=S-0.5;m=g&255;q=n&255;w=r&255;b=B[m+B[q+B[w]]]%12;c=B[m+h+B[q+o+B[w+u]]]%12;d=B[m+l+B[q+p+B[w+v]]]%12;e=B[m+1+B[q+1+B[w+1]]]%12;E=0.5-I*I-N*N-S*S;x=y=z=A=0;if(E>=0){E*=E;x=E*E*a(f[b],I,N,S)}F=0.6-J*J-O*O-T*T;if(F>=0){F*=F;y=F*F*a(f[c],J,O,T)}G=0.6-K*K-P*P-U*U;if(G>=0){G*=G;z=G*G*a(f[d],K,P,U)}H=0.6-L*L-Q*Q-V*V;if(H>=0){H*=H;A=H*H*a(f[e],L,Q,V)}return(16*(x+y+z+A)+0.5);function a(i,j,k){return i[0]*j+i[1]*k}};ParticleJS.Physics2D.Turbulence.Vortex=function(g,i,u,d,e,l){g=g||0;i=i||0;u=(typeof u==="number")?u:100;d=d||32;e=e||32;l=(typeof l==="number")?l:0.5;var r=!1,z,p,f,c,y=new Float32Array(d*e),k=new Float32Array(d*e),v=0.75,a=1,x=0.5,j=-1,m=0.5,q=1,t=0.05,s=1;this.init=function(h){z=h.width;p=h.height;f=z/d;c=p/e;r=!0;b();if(h.callback){h.callback(!0)}};this.apply=function(B){if(l&&u){var A=n(B.x,B.y),h=A.a,w=A.force;B.vx+=l*Math.cos(h)*w;B.vy+=l*Math.sin(h)*w}};function n(B,C){var w=(B/f)|0,A=(C/c)|0,h=A*e+w;return{a:y[h],f:k[h]}}function b(){if(!r){return}var G,H,C=u*u,E=0.25*j*Math.PI*2,D=-E*v;y=new Float32Array(d*e);k=new Float32Array(d*e);for(H=0;H<e;H++){for(G=0;G<d;G++){var w=G*f,A=H*c,F=h(w,A,g,i),B;if(F.dist<=C){B=o(G,H);y[B]=F.angle+E+D;k[B]=q+(t-q)*(F.dist/C)}}}function h(K,M,L,N){var I=(L-K),J=(N-M);return{angle:Math.atan2(J,I),dist:Math.abs(I*I+J*J)}}}function o(h,w){return w*e+h}this.direction=function(h){if(!arguments.length){return j<0?"cw":"ccw"}var w=h==="cw"?-1:1;if(w===j){return this}j=w;b();return this};this.radius=function(h){if(!arguments.length){return u}u=h;b();return this};this.force=function(h){if(!arguments.length){return l}l=h;b();return this};this.forceGradient=function(w,h){if(!arguments.length){return{outer:t,inner:q}}if(typeof w==="object"){t=w.outer;q=w.inner}else{t=w;q=h}b();return this};this.suction=function(h){if(!arguments.length){return v}v=h;b();return this};this.settings=function(h){if(!arguments.length){return{x:g,y:i,radius:u,cellsX:d,cellsY:e,force:l,innerForce:q,outerForce:t,suction:v}}g=h.x||i;i=h.y||g;u=(typeof h.radius==="number")?h.radius:u;d=h.cellsX||d;e=h.cellsY||e;l=(typeof h.force==="number")?h.force:l;v=(typeof h.suction==="number")?h.suction:v;t=(typeof h.outerForce==="number")?h.outerForce:t;q=(typeof h.innerForce==="number")?h.innerForce:q;b();return this};this.generate=function(){b();return this};this.getMapImage=function(){return ParticleJS.Physics2D.Turbulence.Tools.getMapImage(z,p,d,e,f,c,y,k,"rgba(230, 200, 90, 1)")}};ParticleJS.Render.Canvas=function(c,l){l=l||{};var j,r,k,a=50,b=a*0.5,f=l.clearOpacity||1,m=30,q=1/m,d=32,n=m-1,e=d-1,o=document.createElement("canvas"),p=document.createElement("canvas"),g=o.getContext("2d"),i=p.getContext("2d");this.init=function(s,h){j=c.getContext("2d");r=c.width=s;k=c.height=h};this.setup=function(y,u,w){var t=(w.gradient!==null),v=0,s,x;o.width=a*m;o.height=t?a*d:a;if(!t){d=0}p.width=o.width>>1;p.height=o.height>>1;g.save();g.shadowColor=t?"#fff":"rgb("+w.r+","+w.g+","+w.b+")";for(;v<m;v++){s=b*v*q*0.67;x=b-s;g.beginPath();g.arc(-b,b,x,0,2*Math.PI);g.shadowOffsetX=a*(v+1);g.shadowBlur=s;g.fill()}g.restore();if(t){for(v=a;v<o.height;v*=2){g.drawImage(o,0,0,o.width,v,0,v,o.width,v)}g.globalCompositeOperation="source-atop";for(v=0;v<d;v++){var h=gradient.getColor(v/d);g.fillStyle="rgb("+h.r+","+h.g+","+h.b+")";g.fillRect(0,v*a,o.width,a)}}i.drawImage(o,0,0,o.width,o.height,0,0,p.width,p.height);if(typeof j.imageSmoothingEnabled!=="undefined"){j.imageSmoothingEnabled=!1}else{if(typeof j.oImageSmoothingEnabled!=="undefined"){j.oImageSmoothingEnabled=!1}else{if(typeof j.mozImageSmoothingEnabled!=="undefined"){j.mozImageSmoothingEnabled=!1}else{if(typeof j.webkitImageSmoothingEnabled!=="undefined"){j.webkitImageSmoothingEnabled=!1}}}}j.fillStyle="rgba(0,0,0,"+f+")"};this.preRender=function(){if(f<1){j.fillRect(0,0,r,k)}else{j.clearRect(0,0,r,k)}};this.renderParticle=function(t){if(t.size<1){return}var s=(n*t.feather)|0,u=s*a,h=(e*t.lifeIndex)|0,v=h*a;j.globalAlpha=t.opacity;if(t.size>b){j.drawImage(o,u,v,a,a,t.x-t.sizeR,t.y-t.sizeR,t.size,t.size)}else{j.drawImage(p,u>>1,v>>1,b,b,t.x-t.sizeR,t.y-t.sizeR,t.size,t.size)}};this.postRender=function(){};this.clearOpacity=function(h){f=h;j.fillStyle="rgba(0,0,0,"+f+")";return this}};ParticleJS.Gradient=function(){this.width=256;this.stops=[];this.cache=null};ParticleJS.Gradient.prototype.addStop=function(b,a){this.stops.push({pos:b,color:a});return this};ParticleJS.Gradient.prototype.generate=function(){var k=this.width,d=document.createElement("canvas"),e=d.getContext("2d"),f=e.createLinearGradient(0,0,k,0),h,a,g=0,j=0,b;d.width=k;d.height=1;for(;b=this.stops[g++];){f.addColorStop(b.pos,b.color)}e.fillStyle=f;e.fillRect(0,0,k,1);h=e.getImageData(0,0,k,1);a=h.data;this.cache=new Uint8Array(k*3);for(g=0;g<a.length;g+=4){this.cache[j++]=a[g];this.cache[j++]=a[g+1];this.cache[j++]=a[g+2]}};ParticleJS.Gradient.prototype.getColor=function(b){b=Math.min(1,Math.max(0,b));var a=((b*this.width)|0)*3;return{r:this.cache[a],g:this.cache[a+1],b:this.cache[a+2]}};